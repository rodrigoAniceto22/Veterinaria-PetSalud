{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/inventario.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction InventarioFormComponent_option_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cat_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(cat_r1);\n  }\n}\nfunction InventarioFormComponent_option_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const unidad_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", unidad_r2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(unidad_r2);\n  }\n}\nexport let InventarioFormComponent = /*#__PURE__*/(() => {\n  class InventarioFormComponent {\n    inventarioService;\n    router;\n    route;\n    inventario = {\n      codigo: '',\n      nombre: '',\n      descripcion: '',\n      categoria: '',\n      precioCompra: 0,\n      precioVenta: 0,\n      stockActual: 0,\n      stockMinimo: 10,\n      stockMaximo: 100,\n      unidadMedida: 'Unidad',\n      proveedor: '',\n      activo: true,\n      observaciones: ''\n    };\n    esEdicion = false;\n    enviando = false;\n    categorias = ['Medicamentos', 'Vacunas', 'Alimentos', 'Accesorios', 'Higiene', 'Instrumental', 'Otros'];\n    unidades = ['Unidad', 'Caja', 'Frasco', 'Bolsa', 'Kg', 'Litro', 'ml'];\n    constructor(inventarioService, router, route) {\n      this.inventarioService = inventarioService;\n      this.router = router;\n      this.route = route;\n    }\n    ngOnInit() {\n      const id = this.route.snapshot.params['id'];\n      if (id) {\n        this.esEdicion = true;\n        this.cargarInventario(id);\n      }\n    }\n    cargarInventario(id) {\n      this.inventarioService.obtenerPorId(id).subscribe({\n        next: data => {\n          this.inventario = data;\n        },\n        error: error => {\n          console.error('Error al cargar producto:', error);\n          alert('Error al cargar el producto');\n          this.volver();\n        }\n      });\n    }\n    guardar() {\n      if (!this.validar()) {\n        return;\n      }\n      this.enviando = true;\n      if (this.esEdicion) {\n        this.inventarioService.actualizar(this.inventario.idInventario, this.inventario).subscribe({\n          next: () => {\n            alert('Producto actualizado exitosamente');\n            this.volver();\n          },\n          error: error => {\n            console.error('Error al actualizar:', error);\n            alert('Error al actualizar el producto');\n            this.enviando = false;\n          }\n        });\n      } else {\n        this.inventarioService.crear(this.inventario).subscribe({\n          next: () => {\n            alert('Producto creado exitosamente');\n            this.volver();\n          },\n          error: error => {\n            console.error('Error al crear:', error);\n            alert('Error al crear el producto');\n            this.enviando = false;\n          }\n        });\n      }\n    }\n    validar() {\n      if (!this.inventario.codigo || !this.inventario.nombre) {\n        alert('Código y nombre son obligatorios');\n        return false;\n      }\n      if (this.inventario.precioCompra < 0 || this.inventario.precioVenta < 0) {\n        alert('Los precios no pueden ser negativos');\n        return false;\n      }\n      if (this.inventario.stockActual < 0) {\n        alert('El stock no puede ser negativo');\n        return false;\n      }\n      return true;\n    }\n    volver() {\n      this.router.navigate(['/inventario']);\n    }\n    static ɵfac = function InventarioFormComponent_Factory(t) {\n      return new (t || InventarioFormComponent)(i0.ɵɵdirectiveInject(i1.InventarioService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: InventarioFormComponent,\n      selectors: [[\"app-inventario-form\"]],\n      decls: 85,\n      vars: 21,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"row\"], [1, \"col-md-8\", \"offset-md-2\"], [1, \"card\"], [1, \"card-header\"], [1, \"fas\", \"fa-box\"], [1, \"card-body\"], [3, \"ngSubmit\"], [1, \"col-md-6\", \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"name\", \"codigo\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"nombre\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"categoria\", 1, \"form-select\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"name\", \"proveedor\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"mb-3\"], [\"rows\", \"2\", \"name\", \"descripcion\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"col-md-4\", \"mb-3\"], [\"type\", \"number\", \"name\", \"precioCompra\", \"step\", \"0.01\", \"min\", \"0\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"name\", \"precioVenta\", \"step\", \"0.01\", \"min\", \"0\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"unidadMedida\", 1, \"form-select\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"name\", \"stockActual\", \"min\", \"0\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"name\", \"stockMinimo\", \"min\", \"0\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"name\", \"stockMaximo\", \"min\", \"0\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"date\", \"name\", \"fechaVencimiento\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"form-check\", \"form-switch\", \"mt-2\"], [\"type\", \"checkbox\", \"name\", \"activo\", \"id\", \"activo\", 1, \"form-check-input\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"activo\", 1, \"form-check-label\"], [\"rows\", \"2\", \"name\", \"observaciones\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"d-grid\", \"gap-2\", \"d-md-flex\", \"justify-content-md-end\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\", \"disabled\"], [1, \"fas\", \"fa-times\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"fas\", \"fa-save\"], [3, \"value\"]],\n      template: function InventarioFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h4\");\n          i0.ɵɵelement(6, \"i\", 5);\n          i0.ɵɵtext(7);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"div\", 6)(9, \"form\", 7);\n          i0.ɵɵlistener(\"ngSubmit\", function InventarioFormComponent_Template_form_ngSubmit_9_listener() {\n            return ctx.guardar();\n          });\n          i0.ɵɵelementStart(10, \"div\", 1)(11, \"div\", 8)(12, \"label\", 9);\n          i0.ɵɵtext(13, \"C\\u00F3digo *\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"input\", 10);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_input_ngModelChange_14_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.codigo, $event) || (ctx.inventario.codigo = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(15, \"div\", 8)(16, \"label\", 9);\n          i0.ɵɵtext(17, \"Nombre *\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"input\", 11);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_input_ngModelChange_18_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.nombre, $event) || (ctx.inventario.nombre = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(19, \"div\", 1)(20, \"div\", 8)(21, \"label\", 9);\n          i0.ɵɵtext(22, \"Categor\\u00EDa\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"select\", 12);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_select_ngModelChange_23_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.categoria, $event) || (ctx.inventario.categoria = $event);\n            return $event;\n          });\n          i0.ɵɵelementStart(24, \"option\", 13);\n          i0.ɵɵtext(25, \"Seleccione...\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(26, InventarioFormComponent_option_26_Template, 2, 2, \"option\", 14);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(27, \"div\", 8)(28, \"label\", 9);\n          i0.ɵɵtext(29, \"Proveedor\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"input\", 15);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_input_ngModelChange_30_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.proveedor, $event) || (ctx.inventario.proveedor = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(31, \"div\", 16)(32, \"label\", 9);\n          i0.ɵɵtext(33, \"Descripci\\u00F3n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"textarea\", 17);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_textarea_ngModelChange_34_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.descripcion, $event) || (ctx.inventario.descripcion = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(35, \"div\", 1)(36, \"div\", 18)(37, \"label\", 9);\n          i0.ɵɵtext(38, \"Precio Compra\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(39, \"input\", 19);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_input_ngModelChange_39_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.precioCompra, $event) || (ctx.inventario.precioCompra = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(40, \"div\", 18)(41, \"label\", 9);\n          i0.ɵɵtext(42, \"Precio Venta\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(43, \"input\", 20);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_input_ngModelChange_43_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.precioVenta, $event) || (ctx.inventario.precioVenta = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(44, \"div\", 18)(45, \"label\", 9);\n          i0.ɵɵtext(46, \"Unidad de Medida\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(47, \"select\", 21);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_select_ngModelChange_47_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.unidadMedida, $event) || (ctx.inventario.unidadMedida = $event);\n            return $event;\n          });\n          i0.ɵɵtemplate(48, InventarioFormComponent_option_48_Template, 2, 2, \"option\", 14);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(49, \"div\", 1)(50, \"div\", 18)(51, \"label\", 9);\n          i0.ɵɵtext(52, \"Stock Actual\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(53, \"input\", 22);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_input_ngModelChange_53_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.stockActual, $event) || (ctx.inventario.stockActual = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(54, \"div\", 18)(55, \"label\", 9);\n          i0.ɵɵtext(56, \"Stock M\\u00EDnimo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(57, \"input\", 23);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_input_ngModelChange_57_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.stockMinimo, $event) || (ctx.inventario.stockMinimo = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(58, \"div\", 18)(59, \"label\", 9);\n          i0.ɵɵtext(60, \"Stock M\\u00E1ximo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(61, \"input\", 24);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_input_ngModelChange_61_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.stockMaximo, $event) || (ctx.inventario.stockMaximo = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(62, \"div\", 1)(63, \"div\", 8)(64, \"label\", 9);\n          i0.ɵɵtext(65, \"Fecha de Vencimiento\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(66, \"input\", 25);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_input_ngModelChange_66_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.fechaVencimiento, $event) || (ctx.inventario.fechaVencimiento = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(67, \"div\", 8)(68, \"label\", 9);\n          i0.ɵɵtext(69, \"Estado\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(70, \"div\", 26)(71, \"input\", 27);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_input_ngModelChange_71_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.activo, $event) || (ctx.inventario.activo = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(72, \"label\", 28);\n          i0.ɵɵtext(73);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(74, \"div\", 16)(75, \"label\", 9);\n          i0.ɵɵtext(76, \"Observaciones\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(77, \"textarea\", 29);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioFormComponent_Template_textarea_ngModelChange_77_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.inventario.observaciones, $event) || (ctx.inventario.observaciones = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(78, \"div\", 30)(79, \"button\", 31);\n          i0.ɵɵlistener(\"click\", function InventarioFormComponent_Template_button_click_79_listener() {\n            return ctx.volver();\n          });\n          i0.ɵɵelement(80, \"i\", 32);\n          i0.ɵɵtext(81, \" Cancelar \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(82, \"button\", 33);\n          i0.ɵɵelement(83, \"i\", 34);\n          i0.ɵɵtext(84);\n          i0.ɵɵelementEnd()()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate1(\" \", ctx.esEdicion ? \"Editar Producto\" : \"Nuevo Producto\", \" \");\n          i0.ɵɵadvance(7);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.codigo);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.nombre);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.categoria);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.categorias);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.proveedor);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.descripcion);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.precioCompra);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.precioVenta);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.unidadMedida);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngForOf\", ctx.unidades);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.stockActual);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.stockMinimo);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.stockMaximo);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.fechaVencimiento);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.activo);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\" \", ctx.inventario.activo ? \"Activo\" : \"Inactivo\", \" \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.inventario.observaciones);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.enviando);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"disabled\", ctx.enviando);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\" \", ctx.enviando ? \"Guardando...\" : \"Guardar\", \" \");\n        }\n      },\n      dependencies: [i3.NgForOf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.CheckboxControlValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MinValidator, i4.NgModel, i4.NgForm],\n      styles: [\".card[_ngcontent-%COMP%]{box-shadow:0 0 10px #0000001a}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:2px solid #dee2e6}.card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#495057}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#28a745;border-color:#28a745}.btn[_ngcontent-%COMP%]{padding:.5rem 1.5rem;font-weight:500}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#004085}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;border-color:#545b62}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{opacity:1}\"]\n    });\n  }\n  return InventarioFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}