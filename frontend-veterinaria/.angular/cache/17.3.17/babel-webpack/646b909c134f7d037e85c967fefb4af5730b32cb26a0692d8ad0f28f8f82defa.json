{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/inventario.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction InventarioListComponent_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getTotalAlertas(), \" \");\n  }\n}\nfunction InventarioListComponent_div_14_div_4_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r2 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate3(\" \", p_r2.nombre, \" - Stock: \", p_r2.stockActual, \" (M\\u00EDnimo: \", p_r2.stockMinimo, \") \");\n  }\n}\nfunction InventarioListComponent_div_14_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\");\n    i0.ɵɵtemplate(4, InventarioListComponent_div_14_div_4_li_4_Template, 2, 3, \"li\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u26A0\\uFE0F Stock Bajo (\", ctx_r0.alertas.productosStockBajo.length, \"):\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.alertas.productosStockBajo);\n  }\n}\nfunction InventarioListComponent_div_14_div_5_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r3 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", p_r3.nombre, \" - Vencido: \", i0.ɵɵpipeBind2(2, 2, p_r3.fechaVencimiento, \"dd/MM/yyyy\"), \" \");\n  }\n}\nfunction InventarioListComponent_div_14_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\");\n    i0.ɵɵtemplate(4, InventarioListComponent_div_14_div_5_li_4_Template, 3, 5, \"li\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\uD83D\\uDD34 Productos Vencidos (\", ctx_r0.alertas.productosVencidos.length, \"):\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.alertas.productosVencidos);\n  }\n}\nfunction InventarioListComponent_div_14_div_6_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r4 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", p_r4.nombre, \" - Vence: \", i0.ɵɵpipeBind2(2, 2, p_r4.fechaVencimiento, \"dd/MM/yyyy\"), \" \");\n  }\n}\nfunction InventarioListComponent_div_14_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\");\n    i0.ɵɵtemplate(4, InventarioListComponent_div_14_div_6_li_4_Template, 3, 5, \"li\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\uD83D\\uDFE1 Pr\\u00F3ximos a Vencer (\", ctx_r0.alertas.productosProximosAVencer.length, \"):\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.alertas.productosProximosAVencer);\n  }\n}\nfunction InventarioListComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"h5\");\n    i0.ɵɵelement(2, \"i\", 22);\n    i0.ɵɵtext(3, \" Alertas de Inventario\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, InventarioListComponent_div_14_div_4_Template, 5, 2, \"div\", 23)(5, InventarioListComponent_div_14_div_5_Template, 5, 2, \"div\", 23)(6, InventarioListComponent_div_14_div_6_Template, 5, 2, \"div\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.alertas.productosStockBajo && ctx_r0.alertas.productosStockBajo.length > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.alertas.productosVencidos && ctx_r0.alertas.productosVencidos.length > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.alertas.productosProximosAVencer && ctx_r0.alertas.productosProximosAVencer.length > 0);\n  }\n}\nfunction InventarioListComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"div\", 26)(2, \"span\", 27);\n    i0.ɵɵtext(3, \"Cargando...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction InventarioListComponent_table_25_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"span\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\")(17, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function InventarioListComponent_table_25_tr_18_Template_button_click_17_listener() {\n      const inv_r6 = i0.ɵɵrestoreView(_r5).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.editar(inv_r6.idInventario));\n    });\n    i0.ɵɵelement(18, \"i\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function InventarioListComponent_table_25_tr_18_Template_button_click_19_listener() {\n      const inv_r6 = i0.ɵɵrestoreView(_r5).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.eliminar(inv_r6.idInventario));\n    });\n    i0.ɵɵelement(20, \"i\", 32);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const inv_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(inv_r6.codigo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(inv_r6.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(inv_r6.categoria);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"text-danger\", inv_r6.stockActual <= (inv_r6.stockMinimo || 0))(\"text-warning\", inv_r6.stockActual > (inv_r6.stockMinimo || 0) && inv_r6.stockActual <= (inv_r6.stockMinimo || 0) * 1.5);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", inv_r6.stockActual, \" \", inv_r6.unidadMedida, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"S/ \", i0.ɵɵpipeBind2(12, 11, inv_r6.precioVenta, \"1.2-2\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(15, 14, inv_r6.fechaVencimiento, \"dd/MM/yyyy\"));\n  }\n}\nfunction InventarioListComponent_table_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 28)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"C\\u00F3digo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Nombre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Categor\\u00EDa\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Stock\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Precio Venta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Vencimiento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\");\n    i0.ɵɵtext(16, \"Acciones\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"tbody\");\n    i0.ɵɵtemplate(18, InventarioListComponent_table_25_tr_18_Template, 21, 17, \"tr\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.inventarios);\n  }\n}\nfunction InventarioListComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵelement(1, \"i\", 34);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"No hay productos registrados\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let InventarioListComponent = /*#__PURE__*/(() => {\n  class InventarioListComponent {\n    inventarioService;\n    router;\n    inventarios = [];\n    alertas = null;\n    filtro = '';\n    cargando = false;\n    mostrarAlertas = false;\n    constructor(inventarioService, router) {\n      this.inventarioService = inventarioService;\n      this.router = router;\n    }\n    ngOnInit() {\n      this.cargarInventarios();\n      this.cargarAlertas();\n    }\n    cargarInventarios() {\n      this.cargando = true;\n      this.inventarioService.listarActivos().subscribe({\n        next: data => {\n          this.inventarios = data;\n          this.cargando = false;\n        },\n        error: error => {\n          console.error('Error al cargar inventarios:', error);\n          this.cargando = false;\n        }\n      });\n    }\n    cargarAlertas() {\n      this.inventarioService.obtenerAlertas().subscribe({\n        next: data => {\n          this.alertas = data;\n        },\n        error: error => {\n          console.error('Error al cargar alertas:', error);\n        }\n      });\n    }\n    buscar() {\n      if (this.filtro.trim()) {\n        this.inventarioService.buscarPorNombre(this.filtro).subscribe({\n          next: data => {\n            this.inventarios = data;\n          },\n          error: error => {\n            console.error('Error en búsqueda:', error);\n          }\n        });\n      } else {\n        this.cargarInventarios();\n      }\n    }\n    nuevo() {\n      this.router.navigate(['/inventario/nuevo']);\n    }\n    editar(id) {\n      this.router.navigate(['/inventario/editar', id]);\n    }\n    eliminar(id) {\n      if (confirm('¿Está seguro de eliminar este producto?')) {\n        this.inventarioService.eliminar(id).subscribe({\n          next: () => {\n            alert('Producto eliminado exitosamente');\n            this.cargarInventarios();\n          },\n          error: error => {\n            console.error('Error al eliminar:', error);\n            alert('Error al eliminar el producto');\n          }\n        });\n      }\n    }\n    toggleAlertas() {\n      this.mostrarAlertas = !this.mostrarAlertas;\n    }\n    getTotalAlertas() {\n      if (!this.alertas) return 0;\n      return (this.alertas.productosStockBajo?.length || 0) + (this.alertas.productosVencidos?.length || 0) + (this.alertas.productosProximosAVencer?.length || 0);\n    }\n    static ɵfac = function InventarioListComponent_Factory(t) {\n      return new (t || InventarioListComponent)(i0.ɵɵdirectiveInject(i1.InventarioService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: InventarioListComponent,\n      selectors: [[\"app-inventario-list\"]],\n      decls: 27,\n      vars: 6,\n      consts: [[1, \"container-fluid\", \"mt-4\"], [1, \"row\", \"mb-3\"], [1, \"col-md-6\"], [1, \"fas\", \"fa-boxes\"], [1, \"col-md-6\", \"text-end\"], [1, \"btn\", \"btn-warning\", \"me-2\", 3, \"click\"], [1, \"fas\", \"fa-bell\"], [\"class\", \"badge bg-danger ms-1\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"fas\", \"fa-plus\"], [\"class\", \"alert alert-warning\", 4, \"ngIf\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Buscar por nombre...\", 1, \"form-control\", 3, \"ngModelChange\", \"keyup.enter\", \"ngModel\"], [1, \"btn\", \"btn-outline-secondary\", 3, \"click\"], [1, \"fas\", \"fa-search\"], [1, \"card\"], [1, \"card-body\"], [\"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"table table-hover\", 4, \"ngIf\"], [\"class\", \"text-center text-muted py-4\", 4, \"ngIf\"], [1, \"badge\", \"bg-danger\", \"ms-1\"], [1, \"alert\", \"alert-warning\"], [1, \"fas\", \"fa-exclamation-triangle\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-center\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"visually-hidden\"], [1, \"table\", \"table-hover\"], [1, \"btn\", \"btn-sm\", \"btn-info\", \"me-1\", 3, \"click\"], [1, \"fas\", \"fa-edit\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"], [1, \"fas\", \"fa-trash\"], [1, \"text-center\", \"text-muted\", \"py-4\"], [1, \"fas\", \"fa-inbox\", \"fa-3x\", \"mb-3\"]],\n      template: function InventarioListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\");\n          i0.ɵɵelement(4, \"i\", 3);\n          i0.ɵɵtext(5, \" Gesti\\u00F3n de Inventario\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"div\", 4)(7, \"button\", 5);\n          i0.ɵɵlistener(\"click\", function InventarioListComponent_Template_button_click_7_listener() {\n            return ctx.toggleAlertas();\n          });\n          i0.ɵɵelement(8, \"i\", 6);\n          i0.ɵɵtext(9, \" Alertas \");\n          i0.ɵɵtemplate(10, InventarioListComponent_span_10_Template, 2, 1, \"span\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function InventarioListComponent_Template_button_click_11_listener() {\n            return ctx.nuevo();\n          });\n          i0.ɵɵelement(12, \"i\", 9);\n          i0.ɵɵtext(13, \" Nuevo Producto \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(14, InventarioListComponent_div_14_Template, 7, 3, \"div\", 10);\n          i0.ɵɵelementStart(15, \"div\", 1)(16, \"div\", 2)(17, \"div\", 11)(18, \"input\", 12);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function InventarioListComponent_Template_input_ngModelChange_18_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.filtro, $event) || (ctx.filtro = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"keyup.enter\", function InventarioListComponent_Template_input_keyup_enter_18_listener() {\n            return ctx.buscar();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"button\", 13);\n          i0.ɵɵlistener(\"click\", function InventarioListComponent_Template_button_click_19_listener() {\n            return ctx.buscar();\n          });\n          i0.ɵɵelement(20, \"i\", 14);\n          i0.ɵɵtext(21, \" Buscar \");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(22, \"div\", 15)(23, \"div\", 16);\n          i0.ɵɵtemplate(24, InventarioListComponent_div_24_Template, 4, 0, \"div\", 17)(25, InventarioListComponent_table_25_Template, 19, 1, \"table\", 18)(26, InventarioListComponent_div_26_Template, 4, 0, \"div\", 19);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngIf\", ctx.getTotalAlertas() > 0);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.mostrarAlertas && ctx.alertas);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.filtro);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.cargando);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.cargando);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.cargando && ctx.inventarios.length === 0);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i3.DecimalPipe, i3.DatePipe],\n      styles: [\".badge[_ngcontent-%COMP%]{font-size:.75rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.alert[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:0;padding-left:20px}.alert[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}\"]\n    });\n  }\n  return InventarioListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}